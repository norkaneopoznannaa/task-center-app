# Task Center - AI-помощник для управления задачами

Интерактивный CLI помощник для системного аналитика проекта РЭМД.

## Возможности

- **Парсинг задач в свободной форме** - добавляйте задачи как вам удобно
- **Автоматическое извлечение** - Jira ссылки, упоминания людей
- **AI классификация** ✨ **НОВОЕ!** - автоматическая категоризация через Claude API
  - Определение типа задачи (Анализ/Документация/Разработка/Координация/Баг)
  - Оценка сложности (низкая/средняя/высокая)
  - Расчет приоритета с учетом специфики РЭМД
  - Извлечение ключевых терминов и систем (ФЛК, СЭМД, ГИСЗ)
  - Оценка времени выполнения
- **Управление задачами** - статусы, приоритеты, дедлайны
- **Статистика** - по типам, статусам, приоритетам

## Установка

### 1. Установите зависимости

```bash
pip install -r requirements.txt
```

### 2. Настройте AI (для использования автоклассификации)

Скопируйте `.env.example` в `.env`:

```bash
copy .env.example .env
```

Отредактируйте `.env` и добавьте ваш Claude API ключ:
```env
CLAUDE_API_KEY=sk-ant-xxxxx  # Получите на https://console.anthropic.com/
```

**Важно:**
- AI классификация опциональна - базовый функционал работает без API ключа
- С API ключом задачи автоматически классифицируются при добавлении
- Без API ключа задачи получают стандартные значения (тип: Неизвестно, приоритет: MEDIUM)

## Использование

### Добавление задач

```bash
python task_manager.py add
```

Вставьте список задач:
```
1. Задача с ИА. Придумать обоснование: EGISZREMD-15263
2. Проверка изменения имени пространств в СЭМД (EGISZREMD-15284)
3. Задача по КУ ФЭР от Максима
4. Задача Саиды https://jira.i-novus.ru/browse/AN-1418
5. Подготовить примеры использования клода и провести демо
```

Закончите ввод пустой строкой.

### Просмотр всех задач

```bash
python task_manager.py list
```

Фильтрация:
```bash
python task_manager.py list --status "в работе"
python task_manager.py list --priority HIGH
```

### Детали задачи

```bash
python task_manager.py show a7f3c91b
```

Можно использовать начало ID (первые символы).

### Обновление статуса

```bash
python task_manager.py status a7f3c91b IN_PROGRESS
```

Доступные статусы:
- `NEW` - новая
- `IN_PROGRESS` - в работе
- `BLOCKED` - заблокирована
- `REVIEW` - на проверке
- `DONE` - завершена
- `CANCELLED` - отменена

### Статистика

```bash
python task_manager.py stats
```

### Удаление задачи

```bash
python task_manager.py delete a7f3c91b
```

## Структура проекта

```
Task_Center/
├── task_manager.py         # Главная точка входа
├── config.py               # Конфигурация
├── requirements.txt        # Зависимости
├── .env.example            # Пример настроек
│
├── core/                   # Ядро системы
│   ├── models.py           # Data models
│   ├── storage.py          # JSON хранилище
│   └── cli_interface.py    # CLI команды
│
├── parsers/                # Парсинг задач
│   └── task_parser.py      # Парсер свободного текста
│
├── data/                   # Хранилище данных (создается автоматически)
│   ├── tasks.json          # Задачи
│   └── history.json        # История изменений
│
└── project_docs/           # Документация РЭМД (добавьте свои документы)
```

## Data модели

### Task
Основная модель задачи:
- `id` - уникальный идентификатор
- `title` - название
- `description` - описание
- `task_type` - тип (Анализ/Документация/Разработка/Координация/Баг)
- `complexity` - сложность (низкая/средняя/высокая)
- `priority` - приоритет (CRITICAL/HIGH/MEDIUM/LOW/BACKLOG)
- `status` - статус (NEW/IN_PROGRESS/BLOCKED/REVIEW/DONE/CANCELLED)
- `jira_references` - ссылки на Jira
- `mentions` - упоминания людей
- `deadline` - дедлайн
- `metadata` - метаданные (created_at, updated_at, estimated_hours, tags)

## Примеры

### Пример 1: Добавление задач

```bash
$ python task_manager.py add

Добавление новых задач

Вставьте список задач (закончите пустой строкой):
1. Исследование паттернов поведения МИС по дублированию
2. Регламент ФЛК - дополнить
3. Доработать лаунчер: добавить обязательность русского языка

Распознано задач: 3

╭─── Задача #1 ───────────────────────────╮
│ Исследование паттернов поведения МИС    │
│ Jira: -                                 │
│ Упоминания: -                           │
│ Приоритет: MEDIUM                       │
╰─────────────────────────────────────────╯

...

✓ Сохранено 3 задач
```

### Пример 2: Просмотр задач

```bash
$ python task_manager.py list

                        Список задач (10)
┏━━━━━━━━━━┳━━━━━━━━━━━━━━┳━━━━━━━━━━━━━┳━━━━━━━━━━┳━━━━━━━━━━━━┳━━━━━━━━━━━━┓
┃ ID       ┃ Название     ┃ Тип         ┃ Приоритет┃ Статус     ┃ Дедлайн    ┃
┡━━━━━━━━━━╇━━━━━━━━━━━━━━╇━━━━━━━━━━━━━╇━━━━━━━━━━╇━━━━━━━━━━━━╇━━━━━━━━━━━━┩
│ a7f3c91b │ Исследован...│ Неизвестно  │ MEDIUM   │ новая      │ -          │
│ b8e4d82c │ Регламент ФЛ │ Неизвестно  │ MEDIUM   │ новая      │ -          │
└──────────┴──────────────┴─────────────┴──────────┴────────────┴────────────┘
```

### Пример 3: Обновление статуса

```bash
$ python task_manager.py status a7f3c91b IN_PROGRESS

✓ Статус задачи обновлен: новая → в работе
```

## AI Классификация ✨ НОВОЕ!

Task Center теперь использует Claude API для умной классификации задач!

### Что анализирует AI:

1. **Тип задачи** - на основе описания определяет:
   - Анализ/Исследование - для изучения паттернов, требований
   - Документация - для регламентов, спецификаций
   - Разработка - для доработок, технических задач
   - Координация - для встреч, демо, согласований
   - Баг/Проблема - для исправлений и проверок

2. **Сложность** - оценивает по времени и усилиям:
   - низкая (до 2 часов)
   - средняя (2-8 часов)
   - высокая (более 8 часов)

3. **Приоритет** (1-5) - с учетом:
   - Ключевых слов срочности ("срочно", "критично", "блокер")
   - Связи с критичными системами РЭМД (ФЛК, СЭМД, ГИСЗ)
   - Упоминаний руководителей
   - Jira тикетов и контекста

4. **Дополнительная информация**:
   - Оценка времени в часах
   - Ключевые термины (ФЛК, СНИЛС, МИС, etc)
   - Связанные системы
   - Объяснение выбора

### Пример с AI:

```bash
$ python task_manager.py add

Вставьте список задач:
1. Исследование паттернов поведения МИС по дублированию
2. Регламент ФЛК - дополнить - СРОЧНО
3. Проверка изменения СНИЛС в ГИСЗ - баг в продакшене

Классификация задач с помощью AI...
✓ AI классификация завершена

╭─── Задача #1 ────────────────────────────╮
│ Исследование паттернов поведения МИС     │
│                                          │
│ Тип: Анализ/Исследование                │
│ Сложность: средняя                       │
│ Приоритет: MEDIUM | Оценка: 4ч          │
│                                          │
│ Jira: -                                  │
│ Упоминания: -                            │
│                                          │
│ AI уверенность: 85%                      │
│ Задача требует анализа данных МИС...     │
╰──────────────────────────────────────────╯

╭─── Задача #2 ────────────────────────────╮ <- КРАСНАЯ граница (HIGH)
│ Регламент ФЛК - дополнить               │
│                                          │
│ Тип: Документация                        │
│ Сложность: низкая                        │
│ Приоритет: HIGH | Оценка: 1ч            │
│                                          │
│ Jira: -                                  │
│ Упоминания: -                            │
│                                          │
│ AI уверенность: 92%                      │
│ Срочная документация ФЛК...              │
╰──────────────────────────────────────────╯
```

## Что дальше?

### Следующие этапы:

**Этап 3: Контекст документации**
- Поиск релевантной информации в `project_docs/`
- Учет специфики РЭМД (ФЛК, СЭМД, ГИСЗ)
- Оценка критичности на основе документации

**Этап 4: Приоритизация**
- Алгоритм расчета Priority Score
- Команда `analyze` - анализ и сортировка по важности
- Команда `recommend` - что делать сегодня

**Этап 5: Интерактивность**
- Умные уточняющие вопросы
- Автоматическое определение недостающей информации

## Документация РЭМД

Разместите документы проекта в папке `project_docs/`:
- Технические спецификации
- Регламенты
- Описания компонентов (ФЛК, СЭМД, ГИСЗ и т.д.)

AI будет использовать эти документы для контекстного анализа задач (в следующих версиях).

## Поддержка

При возникновении проблем проверьте:
1. Установлены ли все зависимости (`pip install -r requirements.txt`)
2. Правильно ли настроен `.env` (если используете AI функции)
3. Существует ли папка `data/` (создается автоматически)

## Лицензия

Внутренний проект для проекта РЭМД

---

**Версия:** 2.0 (AI Классификация) ✨
**Дата:** 2026-01-19

### История версий:
- **v2.0** (2026-01-19) - AI классификация через Claude API
- **v1.0** (2026-01-19) - MVP с базовым функционалом
