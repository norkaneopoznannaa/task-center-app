{
  "permissions": {
    "allow": [
      "Bash(npm *)",
      "Bash(git *)",
      "Bash(ls *)",
      "Bash(cat *)",
      "Bash(dir:*)",
      "Bash(npm run dev:*)",
      "Bash(netstat:*)",
      "Bash(findstr:*)",
      "Bash(taskkill //F //PID 12392)",
      "Bash(npm run build:electron:*)",
      "Bash(taskkill //F //PID 1768)",
      "Bash(python recognizers.py:*)",
      "Bash(python smart_masking.py:*)",
      "Bash(python server.py:*)",
      "Bash(curl:*)",
      "Bash(taskkill:*)",
      "Bash(timeout /t 2 /nobreak)",
      "Bash(npm install:*)",
      "Bash(python:*)",
      "Bash(timeout /t 3 /nobreak)",
      "Bash(npx tsc:*)",
      "Bash(where:*)",
      "Bash(dir:*)",
      "Bash(find:*)",
      "Bash(wc:*)",
      "Bash(timeout:*)",
      "Bash(ping:*)",
      "Bash(npm run build:electron:renderer:*)",
      "Bash(npm run build:*)",
      "Bash(pip install:*)",
      "Bash(tasklist:*)",
      "Bash(ren:*)",
      "Bash(del comparison_result.txt)",
      "Bash(pip show:*)",
      "Bash(pytest:*)",
      "Bash(npm run test)",
      "Bash(del \"C:\\Users\\vignatov\\data-masker\\tests\\components\\DevToolsPanel.test.tsx\")",
      "Bash(npm run build:react:*)",
      "Bash(npm run dev:electron:*)",
      "WebSearch",
      "Bash(npm run dev:react:*)",
      "WebFetch(domain:claude.ai)",
      "Bash(npm run build:electron:main:*)",
      "Bash(npm run:*)",
      "Bash(npx husky install)",
      "Bash(npx husky init)",
      "Bash(pip freeze:*)",
      "Bash(chcp:*)",
      "Bash(del test_integration.py debug_validator.py debug_recognizer.py check_dictionaries.py)",
      "Bash(PYTHONIOENCODING=utf-8 python:*)",
      "Bash(ls:*)",
      "Bash(pyinstaller:*)",
      "Bash(./data-masker-server.exe:*)",
      "Bash(echo:*)",
      "Bash(DATA_MASKER_PORT=5099 DATA_MASKER_TOKEN=test timeout:*)",
      "Bash(grep:*)",
      "Bash(npx asar:*)",
      "Bash(cat:*)",
      "Bash(kubectl config current-context:*)",
      "Bash(kubectl get:*)",
      "Bash(kubectl exec:*)",
      "Bash(MSYS_NO_PATHCONV=1 kubectl exec:*)",
      "Bash(MSYS_NO_PATHCONV=1 kubectl apply:*)",
      "Bash(MSYS_NO_PATHCONV=1 kubectl get:*)",
      "Bash(MSYS_NO_PATHCONV=1 kubectl logs:*)",
      "Bash(MSYS_NO_PATHCONV=1 kubectl delete:*)",
      "Bash(MSYS_NO_PATHCONV=1 kubectl rollout restart:*)",
      "Bash(MSYS_NO_PATHCONV=1 kubectl describe pod:*)",
      "Bash(MSYS_NO_PATHCONV=1 kubectl describe:*)",
      "Bash(MSYS_NO_PATHCONV=1 kubectl rollout status:*)",
      "Bash(PYTHONIOENCODING=utf-8 pytest:*)",
      "Bash(DATA_MASKER_TOKEN=test python:*)",
      "Bash(DATA_MASKER_TOKEN=test_token_12345678901234567890123456789012 python:*)",
      "Bash(DATA_MASKER_TOKEN=test_token_12345678901234567890123456789012 pytest:*)",
      "Bash(DATA_MASKER_TOKEN=test_token_12345678901234567890123456789012 PYTHONIOENCODING=utf-8 python:*)",
      "Bash(DATA_MASKER_TOKEN=test1234567890test1234567890test12 PYTHONIOENCODING=utf-8 pytest tests/test_masking_quality.py::TestMaskingQuality::test_all_cases -v)",
      "Bash(DATA_MASKER_TOKEN=test1234567890test1234567890test12 PYTHONIOENCODING=utf-8 python:*)",
      "Bash(DATA_MASKER_TOKEN=test1234567890test1234567890test12 PYTHONIOENCODING=utf-8 pytest:*)",
      "Bash(DATA_MASKER_TOKEN=test1234567890test1234567890test12 python:*)",
      "Bash(DATA_MASKER_TOKEN=test1234567890test1234567890test12 PYTHONIOENCODING=utf-8 timeout 60 python:*)",
      "Bash(DATA_MASKER_TOKEN=test1234567890test1234567890test12 PYTHONIOENCODING=utf-8 timeout 90 python:*)",
      "Bash(DATA_MASKER_TOKEN=test1234567890test1234567890test12 PYTHONIOENCODING=utf-8 timeout 120 python:*)",
      "Bash(xargs cat:*)",
      "Bash(DATA_MASKER_TOKEN=test1234567890test1234567890test12 PYTHONIOENCODING=utf-8 timeout 300 python:*)",
      "Bash(DATA_MASKER_TOKEN=test1234567890test1234567890test12 PYTHONIOENCODING=utf-8 timeout 180 python:*)",
      "Bash(DATA_MASKER_TOKEN=test1234567890test1234567890test12 curl:*)",
      "Bash(DATA_MASKER_TOKEN=test1234567890test1234567890test12 PYTHONIOENCODING=utf-8 timeout 600 python:*)",
      "Bash(DATA_MASKER_TOKEN=test1234567890test1234567890test12 timeout 30 python:*)",
      "Bash(DATA_MASKER_TOKEN=test1234567890test1234567890test12 PYTHONIOENCODING=utf-8 timeout 10 python:*)",
      "Bash(git init:*)",
      "Bash(git checkout:*)",
      "Bash(git add:*)",
      "Bash(git commit:*)",
      "Bash(DATA_MASKER_TOKEN=test1234567890test1234567890test12 PYTHONIOENCODING=utf-8 timeout 30 python:*)",
      "Bash(node:*)",
      "Bash(del test_request.json)",
      "Bash(DATA_MASKER_TOKEN=test1234567890test1234567890test12 timeout 10 python:*)",
      "Bash(DATA_MASKER_TOKEN=test1234567890test1234567890test12 PYTHONIOENCODING=utf-8 DATA_MASKER_PORT=5001 timeout 30 python:*)",
      "Bash(DATA_MASKER_TOKEN=test1234567890test1234567890test12 PYTHONIOENCODING=utf-8 timeout 15 python:*)",
      "Bash(py -3.12 -m pip install aiofiles)",
      "Bash(py -3.12:*)",
      "Bash(xargs rm:*)",
      "Bash(powershell:*)",
      "Bash(python3:*)",
      "Bash(kubectl describe:*)",
      "Bash(MSYS_NO_PATHCONV=1 kubectl label:*)",
      "Bash(DATA_MASKER_TOKEN=test1234567890test1234567890test12 PYTHONPATH=. PYTHONIOENCODING=utf-8 python:*)",
      "Bash(if [ -f \"test_real_names.py\" ])",
      "Bash(then echo \"exists\")",
      "Bash(else echo \"not exists\")",
      "Bash(fi)",
      "Bash(for file in \"SUBMISSION_BUILD_INSTRUCTIONS.md\" \"SUBMISSION_QUICK_START.md\")",
      "Bash(do sed -i 's/jury_secret_2024/[PROVIDED_SEPARATELY]/g' \"$file\")",
      "Bash(done)",
      "Bash(npx electron-builder)",
      "Bash(DATA_MASKER_TOKEN=test1234567890test1234567890test12 PYTHONIOENCODING=utf-8 timeout 5 python:*)",
      "Bash(DATA_MASKER_TOKEN=test1234567890test1234567890test12 timeout:*)",
      "Bash(if exist distdata-masker-server rmdir /s /q distdata-masker-server)",
      "Bash(DATA_MASKER_TOKEN=test1234567890test1234567890test12 DATA_MASKER_PORT=5001 timeout:*)",
      "Bash(DATA_MASKER_TOKEN=test1234567890test1234567890test12 DATA_MASKER_PORT=5099 timeout:*)",
      "Bash(en_core \")",
      "Bash(if [ -d \"dist\" ])",
      "Bash(then rm -rf dist)",
      "Bash(if [ -d \"build\" ])",
      "Bash(then rm -rf build)",
      "Bash(DATA_MASKER_TOKEN=test timeout 5 python:*)",
      "Bash(BashOutput ca3bed)",
      "Bash(DATA_MASKER_TOKEN=test1234567890test1234567890test12 PYTHONIOENCODING=utf-8 py -3.12:*)",
      "Bash(python\" | head -1 | awk ''''{print \"test1234567890test1234567890test12\"}'''')\" -d '{\"\"\"\"model_id\"\"\"\":\"\"\"\"qwen2.5-1.5b\"\"\"\"}')",
      "Bash(cmd //c build.bat)",
      "Bash(git tag:*)",
      "Bash(git push:*)",
      "Bash(test:*)",
      "Bash(git check-ignore:*)",
      "Bash(npx prettier:*)",
      "Bash(git reset:*)",
      "Bash(node --version:*)",
      "Bash(npm --version)",
      "Bash(npx electron --version)",
      "Bash(winget:*)",
      "Bash(npx electron-rebuild:*)",
      "Bash(npm audit:*)",
      "Bash(pip-audit:*)",
      "Bash(sort:*)",
      "Bash(git rev-list:*)",
      "Bash(gh pr create --title \"Release v4.4.0 - Security & Refactoring Update\" --body \"$(cat <<''EOF''\n## Release v4.4.0 - Security & Refactoring Update\n\n### ðŸŽ¯ Summary\nMajor quality and security update completing the God Classes refactoring initiative and introducing critical security enhancements.\n\n### ðŸ“Š Changes Overview\n- **20 commits** since v4.3.0\n- **417 tests passing** (304 backend + 113 frontend)\n- **server.py reduced 71%** (2882 â†’ 847 lines)\n\n---\n\n## ðŸ”’ Security Improvements\n\n### File Content Validation (f062799)\n- Magic bytes validation prevents malicious file uploads\n- Validates ZIP signature for Office documents\n- Implementation: `backend/helpers.py::validate_file_content()`\n\n### PII Masking in Logs (6a20859)\n- Automatic redaction of sensitive data in logs\n- Masks: emails, phones, credit cards, INN, SNILS\n- Implementation: `backend/logger.py::mask_pii_in_log()`\n\n### Security Audit (7700bf0)\n- Comprehensive vulnerability scanning (npm + pip)\n- Results: `SECURITY_AUDIT_RESULTS.md`\n- 3 moderate npm vulnerabilities (low production risk)\n\n---\n\n## ðŸ—ï¸ Backend Refactoring\n\n### God Classes Eliminated\n**Before:**\n- server.py: 2882 lines (monolithic)\n- 29 endpoints in one file\n- Global variables scattered\n\n**After:**\n- server.py: 847 lines (**71% reduction**)\n- 9 specialized routers\n- Dependency injection pattern\n- Zero `@app` decorators remaining\n\n### Architecture Improvements\n- âœ… All endpoints extracted to routers\n- âœ… Global variables removed (moved to app.state)\n- âœ… Magic numbers replaced with named constants\n- âœ… LLM router improvements + WebSocket integration\n- âœ… Modular structure (routers/, services/, validators/)\n\n---\n\n## ðŸ› Bug Fixes\n\n1. **Automatic Temp File Cleanup** (b223310)\n   - FastAPI BackgroundTasks clean up after processing\n   \n2. **Electron Rebuild** (f4ad34f)\n   - Fixed better-sqlite3 native module issues\n   \n3. **Python CVE Patches** (caef5e7)\n   - Security vulnerabilities resolved\n\n4. **Missing Decorators** (de62aa5, 5aa2a19)\n   - Fixed `/analyze` endpoint\n   - Updated health endpoint test\n\n---\n\n## ðŸ“– Documentation\n\n- âœ… `RELEASE_v4.4.0_SUMMARY.md` - Complete release notes\n- âœ… `SECURITY_AUDIT_RESULTS.md` - Vulnerability analysis\n- âœ… `PERSISTENCE_IMPLEMENTATION_STATUS.md` - Architecture confirmed\n\n---\n\n## âœ… Testing\n\n**Backend:** 304 tests passed\n**Frontend:** 113 tests passed\n**Total:** 417 tests âœ…\n\nAll tests verified before merge.\n\n---\n\n## ðŸ”„ Breaking Changes\n\n**None.** This is a backwards-compatible release focused on internal refactoring and security improvements.\n\n---\n\n## ðŸ“ˆ Metrics\n\n| Metric | Before | After | Improvement |\n|--------|--------|-------|-------------|\n| server.py size | 2882 lines | 847 lines | **-71%** |\n| Endpoints in server.py | 29 | 0 | **100% extracted** |\n| Modular routers | 0 | 9 | **New architecture** |\n| Magic numbers | 20+ | 0 | **100% eliminated** |\n| Security features | Basic | Advanced | **File validation + PII masking** |\n\n---\n\n## ðŸš€ Ready for Merge\n\nThis PR is ready to be merged into main and released as v4.4.0.\n\nAll critical issues from `CRITICAL_ISSUES_LOCAL_APP.md` have been resolved.\n\nSee `RELEASE_v4.4.0_SUMMARY.md` for complete details.\nEOF\n)\" --base main --head refactor/god-classes)",
      "Bash(git ls-files:*)",
      "Bash(git status:*)",
      "Bash(npm view:*)",
      "Bash(npm cache clean:*)",
      "Bash(powershell -Command \"Get-Process | Where-Object {$_ProcessName -match ''node|electron''} | Select-Object ProcessName, Id | Format-Table\")",
      "Bash(git ls-tree:*)",
      "Bash(dir /a:*)",
      "Bash(dir /s /b *.tsx)",
      "Bash(git log:*)",
      "Bash(git stash:*)",
      "Bash(npm start)",
      "Bash(HUSKY=0 git add:*)",
      "Bash(HUSKY=0 git commit:*)",
      "Bash(git -C \"C:\\Users\\vignatov\\data-masker\" log --oneline)",
      "Bash(tree:*)",
      "Bash(git mv:*)",
      "Bash(git rm:*)",
      "Bash(timeout /t 5 /nobreak)",
      "Bash(git commit -m \"$(cat <<''EOF''\nfix: restore missing React and Electron source files\n\nÐ’Ð¾ÑÑÑ‚Ð°Ð½Ð¾Ð²Ð»ÐµÐ½Ñ‹ Ð¸ÑÑ…Ð¾Ð´Ð½Ñ‹Ðµ Ñ„Ð°Ð¹Ð»Ñ‹ Ñ„Ñ€Ð¾Ð½Ñ‚ÐµÐ½Ð´Ð° Ð¸ ÐºÐ¾Ð½Ñ„Ð¸Ð³ÑƒÑ€Ð°Ñ†Ð¸Ð¸ Vite, ÐºÐ¾Ñ‚Ð¾Ñ€Ñ‹Ðµ Ð±Ñ‹Ð»Ð¸ ÑÐ»ÑƒÑ‡Ð°Ð¹Ð½Ð¾ ÑƒÐ´Ð°Ð»ÐµÐ½Ñ‹ Ð¿Ñ€Ð¸ Ð¾Ñ‡Ð¸ÑÑ‚ÐºÐµ Ð¿Ñ€Ð¾ÐµÐºÑ‚Ð°. Ð­Ñ‚Ð¾ Ð¸ÑÐ¿Ñ€Ð°Ð²Ð»ÑÐµÑ‚ Ð¾ÑˆÐ¸Ð±ÐºÑƒ \"Could not resolve entry module 'index.html'\" Ð¿Ñ€Ð¸ ÑÐ±Ð¾Ñ€ÐºÐµ.\n\nÐ’Ð¾ÑÑÑ‚Ð°Ð½Ð¾Ð²Ð»ÐµÐ½Ð½Ñ‹Ðµ Ñ„Ð°Ð¹Ð»Ñ‹:\n- src/ - Ð²ÑÐµ React ÐºÐ¾Ð¼Ð¿Ð¾Ð½ÐµÐ½Ñ‚Ñ‹ Ð¸ Ð¸ÑÑ…Ð¾Ð´Ð½Ð¸ÐºÐ¸\n- electron/ - Ð½ÐµÐ´Ð¾ÑÑ‚Ð°ÑŽÑ‰Ð¸Ðµ Ð¼Ð¾Ð´ÑƒÐ»Ð¸ Electron\n- vite.config.ts - ÐºÐ¾Ð½Ñ„Ð¸Ð³ÑƒÑ€Ð°Ñ†Ð¸Ñ Vite\n- tsconfig.json, tsconfig.node.json, tsconfig.electron.json - ÐºÐ¾Ð½Ñ„Ð¸Ð³ÑƒÑ€Ð°Ñ†Ð¸Ð¸ TypeScript\n\nðŸ¤– Generated with [Claude Code](https://claude.com/claude-code)\n\nCo-Authored-By: Claude Sonnet 4.5 <noreply@anthropic.com>\nEOF\n)\")",
      "Bash(rm:*)",
      "Bash(curl -I http://localhost:5173)",
      "Bash(git diff:*)",
      "Bash(python test_ai.py:*)",
      "Bash(python test_simple.py:*)",
      "Bash(python task_manager.py:*)",
      "Bash(python add_test_tasks.py:*)",
      "Bash(npm install)",
      "Bash(npx vite)",
      "Bash(cross-env NODE_ENV=development npx electron:*)",
      "Bash(set NODE_ENV=development)",
      "Bash(npx electron .)",
      "Bash(NODE_ENV=development npx electron:*)",
      "Bash(npx vite:*)",
      "Bash(npx cross-env NODE_ENV=development npx electron .)",
      "Bash(powershell -Command:*)",
      "Bash(powershell -ExecutionPolicy Bypass -File \"C:\\Users\\vignatov\\task-center-app\\create-shortcut.ps1\")",
      "Bash(tasklist /FI 'IMAGENAME eq electron.exe')",
      "Bash(tasklist /FI 'IMAGENAME eq node.exe')",
      "Bash(powershell -ExecutionPolicy Bypass -File \"C:\\Users\\vignatov\\Task_Center\\sync-worklog.ps1\")",
      "Bash(git config:*)",
      "Bash(dir /B \"C:\\Users\\vignatov\")",
      "Bash(git commit -m \"$(cat <<''EOF''\nv1.0.0 - Initial release of Task Center Desktop App\n\nFeatures:\n- Task visualization with filtering by status, priority, project\n- Daily plan with smart prioritization algorithm\n- Task details panel with time tracking\n- Timer functionality (start/stop sessions)\n- Color-coded categories (Ð Ð­ÐœÐ”, ÐšÐ£ Ð¤Ð­Ð , Ð¾Ð±Ñ‰Ð¸Ðµ, Ð°Ð²Ñ‚Ð¾)\n- Auto-refresh on tasks.json changes (file watcher)\n- Jira integration (API client ready)\n\nTech stack: Electron + React + Vite + TypeScript\nEOF\n)\")",
      "Bash(git remote add:*)",
      "Bash(git branch:*)",
      "Bash(git commit -m \"$(cat <<''EOF''\nv1.1.0 - UI improvements and Jira worklog sync enhancements\n\nFeatures:\n- Jira worklog update/delete API support (for synced records)\n- Improved edit/delete buttons with SVG icons in WorklogsPage\n- Enhanced DailyPlan component with better UI\n- Improved TaskDetails panel with expanded width\n- Unified font sizes across the app\n- Added @dnd-kit for drag-and-drop support\n\nTechnical:\n- Added updateJiraWorklog and deleteJiraWorklog functions\n- Added IPC handlers for Jira worklog operations\n- Updated TypeScript declarations for new API methods\n\nðŸ¤– Generated with [Claude Code](https://claude.com/claude-code)\n\nCo-Authored-By: Claude Opus 4.5 <noreply@anthropic.com>\nEOF\n)\")",
      "Bash(dir /B \"C:\\Users\\vignatov\\task-center-app\\src\")",
      "Bash(cmd //c \"taskkill //F //IM electron.exe\")"
    ]
  }
}
